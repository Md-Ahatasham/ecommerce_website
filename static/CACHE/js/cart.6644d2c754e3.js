jQuery(document).ready(function(){$('[data-quantity="plus"]').click(function(e){var product_id=parseInt($(this).attr("data-product_id"));var qty_avail=parseInt($(this).attr("data-qty_avail"));e.preventDefault();fieldName=$(this).attr('data-field');var currentVal=parseInt($("#"+fieldName).text());if(!isNaN(currentVal)){if(currentVal<qty_avail){currentVal=currentVal+1;$("#"+fieldName).text(currentVal);cartManage(product_id,currentVal);$(this).attr("disabled",false);$("#minus-btn-"+product_id).attr("disabled",false)}
if(currentVal>=qty_avail){$(this).attr("disabled",true);}}else{$("#"+fieldName).text('1');cartManage(product_id,currentVal);$(this).attr("disabled",true);$("#minus-btn-"+product_id).attr("disabled",true)}});$('[data-quantity="minus"]').click(function(e){var product_id=parseInt($(this).attr("data-product_id"));var qty_avail=parseInt($(this).attr("data-qty_avail"));e.preventDefault();fieldName=$(this).attr('data-field');var currentVal=parseInt($("#"+fieldName).text());if(!isNaN(currentVal)){if(currentVal>1){currentVal=currentVal-1;$("#"+fieldName).text(currentVal);cartManage(product_id,currentVal);$(this).attr("disabled",false);$("#plus-btn-"+product_id).attr("disabled",false)}
if(currentVal<=1){$(this).attr("disabled",true);}}else{$("#"+fieldName).text('1');cartManage(product_id,1);}});});function cartManage(product_id,qty){if(product_id!=""&&product_id!=undefined&&qty!=""&&qty!=undefined){$.ajax({type:"GET",url:"/update_cart_ajax",data:{action:"update",data:JSON.stringify({"product_id":product_id,"quantity":qty})},dataType:'json',success:function(data,status){if(status=="success"){var updatedItemPrice="BDT "+Number(parseInt(data.ilyn_cart[product_id]['quantity'])*data.ilyn_cart[product_id]['price']).toLocaleString('en');var updatedSubTotalPrice=0;var totalItemQty=0;$.each(data.ilyn_cart,function(index,item){updatedSubTotalPrice+=parseInt(item['quantity'])*parseInt(item['price']);totalItemQty+=parseInt(item['quantity']);});updatedSubTotalPrice="BDT "+Number(updatedSubTotalPrice).toLocaleString('en');updateCartPrices(product_id,updatedItemPrice,updatedSubTotalPrice);$("#shopping_cart_btn span, #shopping_cart_btn_mobile span").text(totalItemQty);}},error:function(xhr,desc,err){console.log(err);}});}}
function updateCartPrices(product_id,updatedItemPrice,updatedSubTotalPrice){if($("#item_price_"+product_id)!=undefined)
$("#item_price_"+product_id).html(updatedItemPrice);$("#sub_total_price").html(updatedSubTotalPrice);$("#total_price").html(updatedSubTotalPrice);}
$(document).ready(function(e){$(document).on("click","[id^='item_remove_']",function(e){var elemId=$(this).attr('id');var product_id=elemId.replace("item_remove_","");if(product_id!=""&&product_id!=undefined){$.ajax({type:"GET",url:"/update_cart_ajax",data:{action:"remove",data:JSON.stringify({"product_id":product_id})},dataType:'json',success:function(data,status){if(status=="success"){$("#cart_item_"+product_id).remove();var updatedItemPrice=0;var updatedSubTotalPrice=0;var itemCount=0;var totalItemQty=0;$.each(data.ilyn_cart,function(index,item){updatedSubTotalPrice+=parseInt(item['quantity'])*parseInt(item['price']);totalItemQty+=parseInt(item['quantity']);itemCount++;});updatedSubTotalPrice="BDT "+Number(updatedSubTotalPrice).toLocaleString('en');updateCartPrices(product_id,updatedItemPrice,updatedSubTotalPrice);$("#shopping_cart_btn span, #shopping_cart_btn_mobile span").text(totalItemQty);if(itemCount<1){$("#cart_checkout_btn_link").css("display","none");$("#cart_details_items_header").css("display","none");$("#cart_details_items").css("display","none");$("#cart_details_no_product_msg").css("display","block");}}},error:function(xhr,desc,err){console.log(err);}});}});$(document).on("click","[id^='item_remove_mobile_']",function(e){var elemId=$(this).attr('id');var product_id=elemId.replace("item_remove_mobile_","");if(product_id!=""&&product_id!=undefined){$.ajax({type:"GET",url:"/update_cart_ajax",data:{action:"remove",data:JSON.stringify({"product_id":product_id})},dataType:'json',success:function(data,status){if(status=="success"){$("#cart_item_"+product_id).remove();var updatedItemPrice=0;var updatedSubTotalPrice=0;var itemCount=0;var totalItemQty=0;$.each(data.ilyn_cart,function(index,item){updatedSubTotalPrice+=parseInt(item['quantity'])*parseInt(item['price']);totalItemQty+=parseInt(item['quantity']);itemCount++;});updatedSubTotalPrice="BDT "+Number(updatedSubTotalPrice).toLocaleString('en');updateCartPrices(product_id,updatedItemPrice,updatedSubTotalPrice);$("#shopping_cart_btn span, #shopping_cart_btn_mobile span").text(totalItemQty);if(itemCount<1){$("#cart_checkout_btn_link").css("display","none");$("#cart_details_items_header").css("display","none");$("#cart_details_items").css("display","none");$("#cart_details_no_product_msg").css("display","block");}}},error:function(xhr,desc,err){console.log(err);}});}});});;